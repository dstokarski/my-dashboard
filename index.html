<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="time-date">
                    <div id="time" class="time"></div>
                    <div id="date" class="date"></div>
                </div>
            </div>
            <div class="header-right">
                <button id="sign-in-btn" class="btn btn-primary">Sign in with Google</button>
                <div id="user-info" class="user-info" style="display: none;">
                    <span id="user-name"></span>
                    <button id="edit-btn" class="btn btn-secondary">Edit</button>
                    <button id="sign-out-btn" class="btn btn-secondary">Sign out</button>
                </div>
            </div>
        </header>

        <!-- Weather Section -->
        <div class="weather-section">
            <div class="weather-card">
                <h3>Ottawa, ON</h3>
                <div id="weather-ottawa" class="weather-content">
                    <p class="loading">Loading weather...</p>
                </div>
            </div>
            <div class="weather-card">
                <h3>Chelsea, QC</h3>
                <div id="weather-chelsea" class="weather-content">
                    <p class="loading">Loading weather...</p>
                </div>
            </div>
        </div>

        <!-- Cards Grid -->
        <div class="cards-grid" id="cards-grid">
            <!-- World News -->
            <div class="card" data-card-id="world-news" data-order="0">
                <h2 class="card-title">World News</h2>
                <ul class="card-links">
                    <li><a href="https://www.bbc.com/news" target="_blank">BBC News</a></li>
                    <li><a href="https://www.nytimes.com" target="_blank">New York Times</a></li>
                    <li><a href="https://www.theguardian.com" target="_blank">The Guardian</a></li>
                    <li><a href="https://www.aljazeera.com" target="_blank">Al Jazeera</a></li>
                    <li><a href="https://www.reuters.com" target="_blank">Reuters</a></li>
                </ul>
            </div>

            <!-- Canada News -->
            <div class="card" data-card-id="canada-news" data-order="1">
                <h2 class="card-title">Canada News</h2>
                <ul class="card-links">
                    <li><a href="https://www.cbc.ca/news" target="_blank">CBC News</a></li>
                    <li><a href="https://www.theglobeandmail.com" target="_blank">The Globe and Mail</a></li>
                    <li><a href="https://www.ctvnews.ca" target="_blank">CTV News</a></li>
                    <li><a href="https://globalnews.ca" target="_blank">Global News</a></li>
                    <li><a href="https://nationalpost.com" target="_blank">National Post</a></li>
                </ul>
            </div>

            <!-- Ottawa News -->
            <div class="card" data-card-id="ottawa-news" data-order="2">
                <h2 class="card-title">Ottawa News</h2>
                <ul class="card-links">
                    <li><a href="https://www.cbc.ca/news/canada/ottawa" target="_blank">CBC Ottawa</a></li>
                    <li><a href="https://ottawa.ctvnews.ca" target="_blank">CTV Ottawa</a></li>
                    <li><a href="https://ottawacitizen.com" target="_blank">Ottawa Citizen</a></li>
                    <li><a href="https://www.ottawamatters.com" target="_blank">Ottawa Matters</a></li>
                    <li><a href="https://www.apt613.ca" target="_blank">Apt613</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Edit Card</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="card-title-input">Card Title</label>
                    <input type="text" id="card-title-input" class="form-input" placeholder="Enter card title">
                </div>
                <div class="form-group">
                    <label>Links</label>
                    <div id="links-editor"></div>
                    <button id="add-link-btn" class="btn btn-secondary btn-sm">+ Add Link</button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="delete-card-btn" class="btn btn-danger">Delete Card</button>
                <div class="modal-actions">
                    <button id="cancel-btn" class="btn btn-secondary">Cancel</button>
                    <button id="save-btn" class="btn btn-primary">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get, remove } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyC759vXRewzcVTSy60lhPx_q5Ezx3uL4Qw",
            authDomain: "dashboard-links-4d73a.firebaseapp.com",
            databaseURL: "https://dashboard-links-4d73a-default-rtdb.firebaseio.com",
            projectId: "dashboard-links-4d73a",
            storageBucket: "dashboard-links-4d73a.firebasestorage.app",
            messagingSenderId: "91468827178",
            appId: "1:91468827178:web:53c1485241023ae4785153"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.firebaseDB = { database, ref, set, get, remove };
        window.firebaseAuth = { auth, provider, signInWithPopup, signOut, onAuthStateChanged };
        window.dispatchEvent(new Event('firebaseReady'));
    </script>
    <script src="firebase-manager.js"></script>
</body>
</html>
